# Comparing `tmp/intelliw-2.0.2rc2-py3-none-any.whl.zip` & `tmp/intelliw-2.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,118 +1,122 @@
-Zip file size: 207887 bytes, number of entries: 116
+Zip file size: 210491 bytes, number of entries: 120
 -rw-r--r--  2.0 unx    10244 b- defN 24-Jan-17 02:33 intelliw/.DS_Store
--rw-r--r--  2.0 unx      733 b- defN 24-Apr-01 07:02 intelliw/__init__.py
--rw-r--r--  2.0 unx      825 b- defN 24-Jan-17 03:33 intelliw/feature.py
--rwxr-xr-x  2.0 unx     9696 b- defN 24-Jan-22 08:23 intelliw/prepare_env.sh
+-rw-r--r--  2.0 unx      730 b- defN 24-Apr-30 03:38 intelliw/__init__.py
+-rw-r--r--  2.0 unx      887 b- defN 24-Apr-11 09:04 intelliw/feature.py
+-rwxr-xr-x  2.0 unx    10062 b- defN 24-Apr-30 01:35 intelliw/prepare_env.sh
 -rw-r--r--  2.0 unx        0 b- defN 22-Sep-19 01:43 intelliw/algorithms_demo/README.md
 -rw-r--r--  2.0 unx     5519 b- defN 24-Jan-17 03:33 intelliw/algorithms_demo/algorithm.py
 -rw-r--r--  2.0 unx      270 b- defN 23-Nov-17 06:25 intelliw/algorithms_demo/algorithm.yaml
 -rw-r--r--  2.0 unx        0 b- defN 22-Sep-19 01:43 intelliw/algorithms_demo/requirements.txt
 -rw-r--r--  2.0 unx        0 b- defN 22-Sep-19 01:43 intelliw/config/__init__.py
--rw-r--r--  2.0 unx     4446 b- defN 23-Nov-17 06:25 intelliw/config/cfg_parser.py
--rw-r--r--  2.0 unx     5390 b- defN 24-Mar-27 06:06 intelliw/config/config.py
+-rw-r--r--  2.0 unx     4446 b- defN 24-Apr-30 01:35 intelliw/config/cfg_parser.py
+-rw-r--r--  2.0 unx     5506 b- defN 24-Apr-30 03:33 intelliw/config/config.py
 -rw-r--r--  2.0 unx     5460 b- defN 24-Mar-19 03:30 intelliw/config/dataset_config.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Sep-19 01:43 intelliw/core/__init__.py
--rw-r--r--  2.0 unx     9522 b- defN 23-Nov-17 06:25 intelliw/core/al_decorator.py
+-rw-r--r--  2.0 unx     9507 b- defN 24-Apr-09 09:22 intelliw/core/al_decorator.py
 -rw-r--r--  2.0 unx     5891 b- defN 23-Nov-17 06:25 intelliw/core/custom.py
--rw-r--r--  2.0 unx      740 b- defN 24-Mar-19 02:39 intelliw/core/infer.py
+-rw-r--r--  2.0 unx      744 b- defN 24-Apr-11 09:04 intelliw/core/infer.py
 -rw-r--r--  2.0 unx     9617 b- defN 24-Feb-22 12:15 intelliw/core/linkserver.py
--rw-r--r--  2.0 unx    29057 b- defN 24-Mar-21 08:17 intelliw/core/pipeline.py
--rw-r--r--  2.0 unx     2362 b- defN 24-Jan-17 03:33 intelliw/core/recorder.py
+-rw-r--r--  2.0 unx    29548 b- defN 24-Apr-30 03:35 intelliw/core/pipeline.py
+-rw-r--r--  2.0 unx     2357 b- defN 24-Apr-09 09:22 intelliw/core/recorder.py
 -rw-r--r--  2.0 unx      903 b- defN 24-Jan-17 03:33 intelliw/core/trainer.py
 -rw-r--r--  2.0 unx      675 b- defN 24-Mar-19 03:30 intelliw/datasets/__init__.py
--rw-r--r--  2.0 unx     9230 b- defN 23-Nov-17 06:25 intelliw/datasets/dataset_writer.py
+-rw-r--r--  2.0 unx     9230 b- defN 24-Apr-30 01:33 intelliw/datasets/dataset_writer.py
 -rw-r--r--  2.0 unx     8669 b- defN 24-Mar-19 03:30 intelliw/datasets/datasets.py
 -rw-r--r--  2.0 unx     3691 b- defN 24-Mar-19 03:30 intelliw/datasets/datasource_base.py
 -rw-r--r--  2.0 unx     1006 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_empty.py
 -rw-r--r--  2.0 unx     6847 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_intelliv.py
 -rw-r--r--  2.0 unx     8850 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_iwfactorydata.py
 -rw-r--r--  2.0 unx    15959 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_iwimgdata.py
--rw-r--r--  2.0 unx     9250 b- defN 24-Mar-27 06:44 intelliw/datasets/datasource_large_model.py
+-rw-r--r--  2.0 unx     9096 b- defN 24-Apr-16 08:38 intelliw/datasets/datasource_large_model.py
 -rw-r--r--  2.0 unx     5248 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_local_csv.py
--rw-r--r--  2.0 unx    14858 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_nlp_corpora.py
+-rw-r--r--  2.0 unx    14853 b- defN 24-Apr-09 09:22 intelliw/datasets/datasource_nlp_corpora.py
 -rw-r--r--  2.0 unx     2102 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_remote_csv.py
 -rw-r--r--  2.0 unx     7424 b- defN 24-Feb-04 03:07 intelliw/datasets/datasource_semantic.py
--rw-r--r--  2.0 unx    13871 b- defN 23-Nov-17 06:25 intelliw/datasets/spliter.py
+-rw-r--r--  2.0 unx    13871 b- defN 24-Apr-11 11:57 intelliw/datasets/spliter.py
 -rw-r--r--  2.0 unx    12226 b- defN 23-Nov-17 06:25 intelliw/docs/Q&A.md
 -rw-r--r--  2.0 unx     3144 b- defN 23-Nov-17 06:25 intelliw/docs/README.md
 -rw-r--r--  2.0 unx    50500 b- defN 24-Feb-28 08:49 intelliw/docs/instructions.md
 -rw-r--r--  2.0 unx      699 b- defN 23-Apr-19 05:33 intelliw/functions/__init__.py
 -rw-r--r--  2.0 unx     5512 b- defN 23-Apr-25 07:50 intelliw/functions/data_filtering.py
--rw-r--r--  2.0 unx    37589 b- defN 23-Dec-26 06:36 intelliw/functions/feature_process.py
+-rw-r--r--  2.0 unx    37584 b- defN 24-Apr-09 09:22 intelliw/functions/feature_process.py
 -rw-r--r--  2.0 unx      619 b- defN 22-Sep-19 01:43 intelliw/functions/general.py
 -rw-r--r--  2.0 unx     1486 b- defN 22-Nov-11 07:28 intelliw/functions/matrix.py
 -rw-r--r--  2.0 unx     1711 b- defN 22-Nov-11 07:28 intelliw/functions/opencv.py
 -rw-r--r--  2.0 unx      650 b- defN 23-Feb-03 02:24 intelliw/functions/post.py
 -rw-r--r--  2.0 unx      779 b- defN 22-Sep-19 09:35 intelliw/functions/select_columns.py
 -rw-r--r--  2.0 unx      171 b- defN 22-Sep-19 01:43 intelliw/interface/__init__.py
--rw-r--r--  2.0 unx    12826 b- defN 24-Mar-21 09:26 intelliw/interface/apihandler.py
+-rw-r--r--  2.0 unx    12892 b- defN 24-Apr-30 03:33 intelliw/interface/apihandler.py
 -rw-r--r--  2.0 unx      533 b- defN 24-Mar-21 09:26 intelliw/interface/apijob.py
--rw-r--r--  2.0 unx     8019 b- defN 24-Jan-23 02:25 intelliw/interface/batchjob.py
+-rw-r--r--  2.0 unx     8014 b- defN 24-Apr-09 09:22 intelliw/interface/batchjob.py
 -rw-r--r--  2.0 unx     4240 b- defN 24-Jan-18 07:18 intelliw/interface/controller.py
 -rw-r--r--  2.0 unx     1255 b- defN 23-Dec-25 06:03 intelliw/interface/customjob.py
 -rw-r--r--  2.0 unx     8504 b- defN 23-Nov-17 06:25 intelliw/interface/entrypoint.py
 -rw-r--r--  2.0 unx     1300 b- defN 24-Mar-13 09:21 intelliw/interface/trainjob.py
 -rw-r--r--  2.0 unx     6148 b- defN 24-Feb-27 09:36 intelliw/utils/.DS_Store
--rw-r--r--  2.0 unx      167 b- defN 23-Dec-29 05:54 intelliw/utils/__init__.py
--rw-r--r--  2.0 unx     4824 b- defN 24-Mar-26 07:08 intelliw/utils/cGroup.py
+-rw-r--r--  2.0 unx      201 b- defN 24-Apr-09 09:22 intelliw/utils/__init__.py
+-rw-r--r--  2.0 unx     4824 b- defN 24-Apr-09 07:47 intelliw/utils/cGroup.py
 -rw-r--r--  2.0 unx     2048 b- defN 23-Apr-04 02:49 intelliw/utils/check_algorithm_py.py
 -rw-r--r--  2.0 unx     4103 b- defN 23-Mar-21 02:13 intelliw/utils/crontab.py
--rw-r--r--  2.0 unx     5987 b- defN 24-Jan-17 03:33 intelliw/utils/debug_controller.py
--rw-r--r--  2.0 unx     1932 b- defN 23-Dec-27 02:25 intelliw/utils/exception.py
+-rw-r--r--  2.0 unx     6075 b- defN 24-Apr-30 01:35 intelliw/utils/debug_controller.py
+-rw-r--r--  2.0 unx     1983 b- defN 24-Apr-30 03:33 intelliw/utils/exception.py
 -rw-r--r--  2.0 unx     2748 b- defN 23-Nov-17 06:25 intelliw/utils/gen_model_cfg.py
 -rw-r--r--  2.0 unx     2126 b- defN 23-Dec-28 10:51 intelliw/utils/global_val.py
 -rw-r--r--  2.0 unx       44 b- defN 24-Jan-17 03:33 intelliw/utils/health_check.py
 -rw-r--r--  2.0 unx     2916 b- defN 24-Feb-28 08:48 intelliw/utils/hijack_function.py
 -rw-r--r--  2.0 unx     1049 b- defN 24-Jan-22 08:23 intelliw/utils/iprofile.py
--rw-r--r--  2.0 unx    13531 b- defN 24-Feb-29 03:12 intelliw/utils/iuap_request.py
+-rw-r--r--  2.0 unx    13632 b- defN 24-Apr-09 09:22 intelliw/utils/iuap_request.py
 -rw-r--r--  2.0 unx     4433 b- defN 24-Mar-19 03:30 intelliw/utils/logger.py
--rw-r--r--  2.0 unx     6745 b- defN 24-Jan-26 06:31 intelliw/utils/message.py
--rw-r--r--  2.0 unx     6172 b- defN 23-Nov-17 06:25 intelliw/utils/storage_service.py
--rw-r--r--  2.0 unx     6695 b- defN 24-Feb-22 12:59 intelliw/utils/util.py
--rw-r--r--  2.0 unx      909 b- defN 24-Mar-01 07:29 intelliw/utils/yaml_downloader.py
+-rw-r--r--  2.0 unx     6740 b- defN 24-Apr-09 09:22 intelliw/utils/message.py
+-rw-r--r--  2.0 unx     6240 b- defN 24-Apr-09 11:39 intelliw/utils/storage_service.py
+-rw-r--r--  2.0 unx     7354 b- defN 24-Apr-30 03:33 intelliw/utils/util.py
+-rw-r--r--  2.0 unx      346 b- defN 24-Apr-09 09:22 intelliw/utils/yaml_downloader.py
 -rw-r--r--  2.0 unx     9180 b- defN 24-Feb-28 08:49 intelliw/utils/yms_downloader.py
 -rw-r--r--  2.0 unx     1163 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/__init__.py
 -rw-r--r--  2.0 unx    20436 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/base.py
 -rw-r--r--  2.0 unx      829 b- defN 24-Feb-29 03:12 intelliw/utils/aiocache/common.py
 -rw-r--r--  2.0 unx    19811 b- defN 24-Mar-01 07:29 intelliw/utils/aiocache/decorators.py
 -rw-r--r--  2.0 unx       44 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/exceptions.py
 -rw-r--r--  2.0 unx     9070 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/factory.py
 -rw-r--r--  2.0 unx     6457 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/lock.py
 -rw-r--r--  2.0 unx     3470 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/plugins.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/backends/__init__.py
 -rw-r--r--  2.0 unx     5960 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/backends/memcached.py
 -rw-r--r--  2.0 unx     4503 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/backends/memory.py
 -rw-r--r--  2.0 unx     7156 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/backends/redis.py
 -rw-r--r--  2.0 unx      531 b- defN 24-Feb-28 08:49 intelliw/utils/aiocache/serializers/__init__.py
--rw-r--r--  2.0 unx     5556 b- defN 24-Mar-21 06:56 intelliw/utils/aiocache/serializers/serializers.py
+-rw-r--r--  2.0 unx     5556 b- defN 24-Apr-09 07:47 intelliw/utils/aiocache/serializers/serializers.py
 -rw-r--r--  2.0 unx      878 b- defN 24-Jan-17 03:33 intelliw/utils/colorlog/__init__.py
 -rw-r--r--  2.0 unx     2268 b- defN 24-Jan-17 03:33 intelliw/utils/colorlog/escape_codes.py
 -rw-r--r--  2.0 unx     7791 b- defN 24-Jan-17 03:33 intelliw/utils/colorlog/formatter.py
 -rw-r--r--  2.0 unx     2212 b- defN 24-Jan-17 03:33 intelliw/utils/colorlog/wrappers.py
 -rw-r--r--  2.0 unx      466 b- defN 22-Nov-11 07:28 intelliw/utils/database/__init__.py
 -rw-r--r--  2.0 unx     3253 b- defN 22-Nov-24 06:58 intelliw/utils/database/connection.py
 -rw-r--r--  2.0 unx     2023 b- defN 22-Nov-11 07:28 intelliw/utils/database/proxy.py
 -rw-r--r--  2.0 unx     2605 b- defN 22-Nov-11 07:28 intelliw/utils/database/schema.py
--rw-r--r--  2.0 unx      124 b- defN 24-Jan-17 03:33 intelliw/utils/fastapi/__init__.py
--rw-r--r--  2.0 unx      888 b- defN 24-Jan-17 03:33 intelliw/utils/fastapi/context.py
--rw-r--r--  2.0 unx     3409 b- defN 24-Mar-21 09:26 intelliw/utils/fastapi/gunicorn_server.py
--rw-r--r--  2.0 unx      447 b- defN 24-Jan-17 03:33 intelliw/utils/fastapi/request.py
--rw-r--r--  2.0 unx      547 b- defN 24-Jan-17 03:33 intelliw/utils/fastapi/response.py
+-rw-r--r--  2.0 unx      124 b- defN 24-Apr-11 09:04 intelliw/utils/intelliwapi/__init__.py
+-rw-r--r--  2.0 unx      892 b- defN 24-Apr-11 09:04 intelliw/utils/intelliwapi/context.py
+-rw-r--r--  2.0 unx     3158 b- defN 24-Apr-30 03:33 intelliw/utils/intelliwapi/gunicorn_server.py
+-rw-r--r--  2.0 unx      471 b- defN 24-Apr-11 09:04 intelliw/utils/intelliwapi/request.py
+-rw-r--r--  2.0 unx      547 b- defN 24-Apr-11 09:04 intelliw/utils/intelliwapi/response.py
+-rw-r--r--  2.0 unx     3883 b- defN 24-Apr-15 02:22 intelliw/utils/intelliwapi/workers.py
+-rw-r--r--  2.0 unx      104 b- defN 24-Apr-24 02:01 intelliw/utils/logs/iw-algo-fx-framework.log
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-24 02:01 intelliw/utils/logs/iw-algo-fx-user.log
+-rw-r--r--  2.0 unx      108 b- defN 24-Apr-24 02:01 intelliw/utils/logs/iw-algo-fx.log
 -rw-r--r--  2.0 unx     2513 b- defN 24-Mar-01 07:22 intelliw/utils/redis/__init__.py
 -rw-r--r--  2.0 unx      245 b- defN 24-Feb-28 08:49 intelliw/utils/redis/common.py
--rw-r--r--  2.0 unx     2450 b- defN 24-Feb-29 06:34 intelliw/utils/redis/connect.py
+-rw-r--r--  2.0 unx     2450 b- defN 24-Apr-09 09:08 intelliw/utils/redis/connect.py
 -rw-r--r--  2.0 unx     2601 b- defN 24-Mar-01 07:29 intelliw/utils/redis/connect_async.py
 -rw-r--r--  2.0 unx     1315 b- defN 24-Feb-28 08:49 intelliw/utils/redis/test.py
 -rw-r--r--  2.0 unx      636 b- defN 24-Feb-22 09:03 intelliw/utils/redis/logs/iw-algo-fx-framework.log
 -rw-r--r--  2.0 unx        0 b- defN 24-Feb-22 08:49 intelliw/utils/redis/logs/iw-algo-fx-user.log
 -rw-r--r--  2.0 unx     1724 b- defN 24-Feb-22 11:56 intelliw/utils/redis/logs/iw-algo-fx.log
 -rw-r--r--  2.0 unx      200 b- defN 23-Apr-04 02:49 intelliw/utils/spark_process/__init__.py
 -rw-r--r--  2.0 unx    26154 b- defN 23-Nov-17 06:25 intelliw/utils/spark_process/engine.py
 -rw-r--r--  2.0 unx     4420 b- defN 23-Apr-04 02:49 intelliw/utils/spark_process/spark.py
--rw-r--r--  2.0 unx    35147 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/LICENCE
--rw-r--r--  2.0 unx     4943 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/WHEEL
--rw-r--r--  2.0 unx       63 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        9 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    10331 b- defN 24-Apr-01 07:02 intelliw-2.0.2rc2.dist-info/RECORD
-116 files, 646615 bytes uncompressed, 191423 bytes compressed:  70.4%
+-rw-r--r--  2.0 unx    35147 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/LICENCE
+-rw-r--r--  2.0 unx     4940 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       63 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        9 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    10711 b- defN 24-Apr-30 03:39 intelliw-2.1.0.dist-info/RECORD
+120 files, 652210 bytes uncompressed, 193411 bytes compressed:  70.3%
```

## zipnote {}

```diff
@@ -276,27 +276,39 @@
 
 Filename: intelliw/utils/database/proxy.py
 Comment: 
 
 Filename: intelliw/utils/database/schema.py
 Comment: 
 
-Filename: intelliw/utils/fastapi/__init__.py
+Filename: intelliw/utils/intelliwapi/__init__.py
 Comment: 
 
-Filename: intelliw/utils/fastapi/context.py
+Filename: intelliw/utils/intelliwapi/context.py
 Comment: 
 
-Filename: intelliw/utils/fastapi/gunicorn_server.py
+Filename: intelliw/utils/intelliwapi/gunicorn_server.py
 Comment: 
 
-Filename: intelliw/utils/fastapi/request.py
+Filename: intelliw/utils/intelliwapi/request.py
 Comment: 
 
-Filename: intelliw/utils/fastapi/response.py
+Filename: intelliw/utils/intelliwapi/response.py
+Comment: 
+
+Filename: intelliw/utils/intelliwapi/workers.py
+Comment: 
+
+Filename: intelliw/utils/logs/iw-algo-fx-framework.log
+Comment: 
+
+Filename: intelliw/utils/logs/iw-algo-fx-user.log
+Comment: 
+
+Filename: intelliw/utils/logs/iw-algo-fx.log
 Comment: 
 
 Filename: intelliw/utils/redis/__init__.py
 Comment: 
 
 Filename: intelliw/utils/redis/common.py
 Comment: 
@@ -324,26 +336,26 @@
 
 Filename: intelliw/utils/spark_process/engine.py
 Comment: 
 
 Filename: intelliw/utils/spark_process/spark.py
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/LICENCE
+Filename: intelliw-2.1.0.dist-info/LICENCE
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/METADATA
+Filename: intelliw-2.1.0.dist-info/METADATA
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/WHEEL
+Filename: intelliw-2.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/entry_points.txt
+Filename: intelliw-2.1.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/top_level.txt
+Filename: intelliw-2.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: intelliw-2.0.2rc2.dist-info/RECORD
+Filename: intelliw-2.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## intelliw/__init__.py

```diff
@@ -4,15 +4,15 @@
 LastEditors: Hexu
 LastEditTime: 2023-05-22 14:00:18
 FilePath: /iw-algo-fx/intelliw/__init__.py
 Description: intelliw
 '''
 # coding: utf-8
 import sys
-__version__ = "2.0.2rc2"
+__version__ = "2.1.0"
 
 logo = f"""\033[92m
 -------------------------------------------------------------
          ⓐ                    _    _    ⓘ
          _  _ __    _    ___ | |  | |   _  _     _
         | || '_ \ _| |_ / _ \| |  | |  | |\ \ _ / /
         | || | | |_   _|  __/| |__| |__| | \  _  /
```

## intelliw/feature.py

```diff
@@ -12,13 +12,14 @@
     set_context
 )
 from intelliw.core.linkserver import linkserver
 from intelliw.utils.logger import _get_algorithm_logger as get_logger, _get_framework_logger
 from intelliw.utils import exception
 from intelliw.utils.storage_service import FileTransferDevice
 from intelliw.datasets.datasets import get_datasource_writer as OutPutWriter
+from intelliw.utils.intelliwapi.workers import IntelliwWorker
 
 try:
     from intelliw.utils.spark_process.spark import Spark
 except ImportError as e:
     _get_framework_logger().warning(
         "\033[33mIf want use spark, you need: pip install pyspark\033[0m, error: %s", e)
```

## intelliw/prepare_env.sh

```diff
@@ -80,15 +80,15 @@
   echo '设置状态信息定时上报间隔' $PERODIC_INTERVAL
 fi
 
 function caught_error() {
   if [[ -n "$REPORT_ADDR" ]]; then
     message=$1
     if [[ -z "$message" ]]; then
-      curl -s -o /dev/nul -H "Content-Type:application/json" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":500,\"token\":\"$TOKEN\",\"type\":\"$REPORT_TYPE\",\"message\":\"$ERR_MASSAGE\",\"data\":\"\"}" $REPORT_ADDR
+      curl -s -o /dev/nul -H "Content-Type:application/json" -H "X-tenantId:$TENANT_ID" -H "api-token:$TOKEN" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":500,\"token\":\"$TOKEN\",\"type\":\"$REPORT_TYPE\",\"message\":\"$ERR_MASSAGE\",\"data\":\"\"}" $REPORT_ADDR
     else
       curl -s -o /dev/nul -H "Content-Type:application/json" -X POST --data $message $REPORT_ADDR
     fi
   fi
 }
 
 function report_error() {
@@ -98,27 +98,27 @@
       message="Process finished with exit code 137: Out Of Memory"
     else
       message="Process finished with Error: $1, function $2, occurred on $3"
     fi
 
     # 上报报错
     if [[ -n "$REPORT_ADDR" ]]; then
-      curl -i -H "Content-Type:application/json" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":500,\"token\":\"$TOKEN\",\"type\":\"$REPORT_TYPE\",\"message\":\"$message\",\"data\":\"\"}" "$REPORT_ADDR"
+      curl -i -H "Content-Type:application/json" -H "X-tenantId:$TENANT_ID" -H "api-token:$TOKEN" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":500,\"token\":\"$TOKEN\",\"type\":\"$REPORT_TYPE\",\"message\":\"$message\",\"data\":\"\"}" "$REPORT_ADDR"
     else
       echo "$message"
     fi
   fi
 }
 
 function report_info() {
   # 上报
   T=$1
   M=$2
   D=$3
-  curl -i -H "Content-Type:application/json" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":200,\"token\":\"$TOKEN\",\"type\":\"$T\",\"message\":\"$M\",\"data\":$D}" "$REPORT_ADDR"
+  curl -i -H "Content-Type:application/json" -H "X-tenantId:$TENANT_ID" -H "api-token:$TOKEN" -X POST --data "{\"id\":\"$INSTANCE_ID\",\"code\":200,\"token\":\"$TOKEN\",\"type\":\"$T\",\"message\":\"$M\",\"data\":$D}" "$REPORT_ADDR"
 }
 
 trap 'report_error $? $FUNCNAME $LINENO' CHLD ILL
 
 get_package() {
   if [[ -f "$packages_path/algorithm.yaml" ]]; then
     echo $packages_path
@@ -129,28 +129,35 @@
         break
       fi
     done
   fi
   echo ''
 }
 
+env_init_config() {
+  if [[ -f "$1/env_init_config.sh" ]]; then
+    echo "find env_init_config.sh..."
+    source $1/env_init_config.sh
+  fi
+}
+
 download_ca_file() {
   if [[ -n "$1" ]]; then
-    echo "证书开始下载"
+    echo "证书开始下载 $CA_FILE_URL"
     mkdir $workdir/cert
 
     python $intelliw_path/utils/yaml_downloader.py $1 $workdir/cert.tar.gz
     if [ $? != 0 ]; then
-      echo "证书下载失败, 跳过证书校验"
+      echo "证书下载失败, 跳过证书校验, $CA_FILE_URL"
     else
       tar -zxvf $workdir/cert.tar.gz -C $workdir/cert
       export INTELLIW_SSL_FILEPATH=$workdir/cert/
     fi
   else
-    echo "证书下载地址为空,跳过处理"
+    echo "证书下载地址为空,跳过处理, $CA_FILE_URL"
   fi
 }
 
 download_model_yaml() {
   if [[ -n "$1" ]]; then
     echo "model.yaml开始下载"
     if [[ -f "$2/model.yaml" ]]; then
@@ -171,18 +178,20 @@
   else
     echo "model.yaml下载地址为空,跳过处理"
   fi
 }
 
 # 获取算法文件位置
 algorithm_root_dir=$(get_package)
+# load env init
+env_init_config "$algorithm_root_dir"
 # 下载model.yaml
 download_model_yaml "$MODEL_YAML_URL" "$algorithm_root_dir"
 download_ca_file "$CA_FILE_URL"
-echo "$CA_FILE_URL"
+
 
 # ↓↓↓↓ 导入 ↓↓↓↓
 # import 导入模型 导入算法
 import() {
   cd "$algorithm_root_dir" || exit # python会读取项目启动时当前目录作为工作路径，如果不进到算法的包里，很容易导致算法的相对路径全部失效
 
   cmd="python $controller_path -m $1 -p $algorithm_root_dir "
```

## intelliw/config/cfg_parser.py

```diff
@@ -33,15 +33,15 @@
 
     Returns: global config
     """
     _, ext = os.path.splitext(file_path)
     assert ext in ['.yml', '.yaml'], "only support yaml files for now"
 
     cfg = AttrDict()
-    if config.IS_SPECIALIZATION == 1:
+    if config.IS_SPECIALIZATION == 2:
         with open(file_path, 'rb') as f:
             text = f.read()
             model = aes_cbc_decrypt(text)
             cfg = merge_config(yaml.load(model, Loader=yaml.Loader), cfg)
     else:
         with open(file_path, 'r', encoding='UTF-8') as f:
             cfg = merge_config(yaml.load(f, Loader=yaml.Loader), cfg)
@@ -61,30 +61,30 @@
     return global_config
 
 
 def load_single_config(file_path):
     _, ext = os.path.splitext(file_path)
     assert ext in ['.yml', '.yaml'], "only support yaml files for now"
 
-    if config.IS_SPECIALIZATION == 1:
+    if config.IS_SPECIALIZATION == 2:
         with open(file_path, 'rb') as f:
             text = f.read()
             model = aes_cbc_decrypt(text)
             cfg = yaml.load(model, Loader=yaml.Loader)
     else:
         with open(file_path, 'r', encoding='UTF-8') as f:
             cfg = yaml.load(f, Loader=yaml.Loader)
     return cfg
 
 
 def dump_config(data, file_path):
     _, ext = os.path.splitext(file_path)
     assert ext in ['.yml', '.yaml'], "only support yaml files for now"
 
-    if config.IS_SPECIALIZATION == 1:
+    if config.IS_SPECIALIZATION == 2:
         with open(file_path, 'wb') as f:
             model = yaml.dump(data, default_flow_style=False)
             f.write(model)
     else:
         with open(file_path, 'w', encoding='UTF-8') as f:
             model = yaml.dump(data, default_flow_style=False,
                               allow_unicode=True)
```

## intelliw/config/config.py

```diff
@@ -94,28 +94,29 @@
 # nlp数据格式，接口获取数据为：文件、行 或 为 本地数据（file/row/local）
 NLP_CORPORA_INPUT_TYPE = 'local'
 NLP_CORPORA_FILEPATH = "tmp_local_nlp_corpora_data/"
 NLP_CORPORA_TRAIN_FILEPATH = os.path.join(NLP_CORPORA_FILEPATH, "train/")
 NLP_CORPORA_VAL_FILEPATH = os.path.join(NLP_CORPORA_FILEPATH, "val/")
 NLP_CORPORA_TEST_FILEPATH = os.path.join(NLP_CORPORA_FILEPATH, "test/")
 
-
 # 大模型数据存储文件名
 # 大模型数据格式，接口获取数据为：行row
 LARGE_MODEL_INPUT_TYPE = 'row'
 LARGE_MODEL_FILEPATH = "tmp_local_large_model_data/"
 LARGE_MODEL_TRAIN_FILEPATH = os.path.join(LARGE_MODEL_FILEPATH, "train/")
 LARGE_MODEL_VAL_FILEPATH = os.path.join(LARGE_MODEL_FILEPATH, "val/")
 LARGE_MODEL_TEST_FILEPATH = os.path.join(LARGE_MODEL_FILEPATH, "test/")
 
 # 推理服务
 TOKEN = ''  # API 响应 token
 API_EXTRAINFO = True  # API 响应包含 extra info
 INFER_MULTI_PROCESS = False  # 是否多进程
 INFER_MULTI_THREAD_COUNT = 0  # 自定义线程数
+INFER_MULTI_PROCESS_COUNT = 0  # 自定义进程数
+INFER_MAX_TASK_RATIO = 2  # 最大任务数是几倍的线程数
 
 # 云存储相关
 STORAGE_SERVICE_PATH = ''
 STORAGE_SERVICE_URL = ''
 FILE_UP_TYPE = ""  # 对应的类型 AliOss/Minio
 
 # AuthSDK
```

## intelliw/core/al_decorator.py

```diff
@@ -12,15 +12,15 @@
 import traceback
 from functools import wraps
 from intelliw.utils import message
 from intelliw.utils.exception import CheckpointException
 from intelliw.utils.storage_service import FileTransferDevice
 from intelliw.utils.logger import _get_framework_logger, Logger
 from intelliw.config import config
-from intelliw.utils.util import generate_random_str, get_json_encoder
+from intelliw.utils import generate_random_str, get_json_encoder
 
 logger = _get_framework_logger()
 
 save_index = 0
 curkey_r = generate_random_str(32)
 
 
@@ -36,15 +36,15 @@
                                os.path.join(relative_path, file))
         elif os.path.isfile(model_path):
             zipf.write(model_path, os.path.basename(model_path))
     return outpath
 
 
 def decorator_report_train_info(function, reporter=None):
-    from intelliw.utils.util import get_json_encoder
+    from intelliw.utils import get_json_encoder
 
     @wraps(function)
     def wrapper(loss, lr, iter, batchsize, **kwargs):
         if reporter is not None:
             info = json.dumps({
                 "loss": loss,
                 "lr": lr,
@@ -56,15 +56,15 @@
             reporter.report(message.CommonResponse(
                 200, 'report_train_info', '', str(info)))
         return function(loss, lr, iter, batchsize, **kwargs)
     return wrapper
 
 
 def decorator_report_val_info(function, reporter=None):
-    from intelliw.utils.util import get_json_encoder
+    from intelliw.utils import get_json_encoder
 
     @wraps(function)
     def wrapper(*args, **kwargs):
         if reporter is not None:
             val = {}
 
             # process args
```

## intelliw/core/infer.py

```diff
@@ -5,15 +5,15 @@
 LastEditTime: 2023-05-24 15:59:01
 FilePath: /iw-algo-fx/intelliw/core/infer.py
 Description: Infer core
 '''
 import os
 
 # coding: utf-8
-from intelliw.utils.fastapi import request
+from intelliw.utils.intelliwapi import request
 from intelliw.core.pipeline import Pipeline
 from intelliw.utils.global_val import gl
 
 
 class Infer:
     """
     infer entrypoint
```

## intelliw/core/pipeline.py

```diff
@@ -11,16 +11,16 @@
 import importlib.util
 import sys
 from inspect import signature
 from typing import Tuple
 from intelliw.config.cfg_parser import load_config
 from intelliw.datasets.datasets import DataSets, MultipleDataSets
 from intelliw.utils import exception, yms_downloader
-from intelliw.utils.exception import ModelLoadException
-from intelliw.utils.util import prepare_algorithm_parameters, prepare_model_parameters, import_code, get_first_element
+from intelliw.utils.exception import ModelLoadException, LimitConcurrencyError
+from intelliw.utils import prepare_algorithm_parameters, prepare_model_parameters, import_code, get_first_element
 from intelliw.utils.check_algorithm_py import is_valid_algorithm
 import intelliw.utils.message as message
 from intelliw.core.recorder import Recorder
 from intelliw.core.linkserver import linkserver
 from intelliw.utils.logger import _get_framework_logger, _get_algorithm_logger
 from intelliw.config import config
 from intelliw.utils.global_val import gl
@@ -75,14 +75,15 @@
         self.recorder = reporter if isinstance(reporter, Recorder) else Recorder(
             reporter)
         self.instance = None
         self.custom_router = []
         self.alg_describe = ''
         self.background_tasks = set()
         self.async_executor = None
+        self.max_task_count = 999
         self.thread_data_pool = {}
 
     @staticmethod
     def _check_certified_image():
         # 检查是不是规范化镜像（onnx）
         if any([importlib.util.find_spec("torch"),
                 importlib.util.find_spec("paddle"),
@@ -131,15 +132,14 @@
             ps: dict = envs.get("parameters", {})
             for k, v in ps.items():
                 os.environ[str(k)] = str(v)
 
         # 初始化YMS (最高优先级)
         yms_downloader.run()
 
-
     def _initialize_algorithm(self, algorithm_yaml_file):
         cfg = self.load_config(algorithm_yaml_file)
         gl.alg_yaml_file = algorithm_yaml_file
 
         # 路由配置获取
         self.custom_router = cfg[Const.algorithmInformation].get(
             'router', [])
@@ -497,15 +497,22 @@
                 message.err_dataset, de, is_framework_error=False
             )
         except Exception as e:
             self.raise_exception(
                 message.err_train, e, is_framework_error=False
             )
 
-    async def _infer_process(self, data, request, func='infer', need_feature=True):
+    async def _infer_process(self, data, request, func='infer', need_feature=False):
+
+        if self.async_executor._work_queue.qsize() >= self.max_task_count:
+            error_msg = (f"Exceeded concurrency limit, "
+                         f"Max task limit: {self.max_task_count * config.INFER_MULTI_PROCESS_COUNT}")
+            logger.warning(error_msg)
+            raise LimitConcurrencyError(error_msg)
+
         loop = asyncio.get_event_loop()
 
         if need_feature:  # 前处理
             data = await loop.run_in_executor(
                 self.async_executor, self._feature_helper, Const.pre_predict,
                 self._transform_helper(Const.pre_predict, data, False)
             )
@@ -543,14 +550,16 @@
         """
         try:
             logger.debug("receiving predict data %s", data)
             result = await self._infer_process(
                 data, request, func, need_feature
             )
             return result, None
+        except LimitConcurrencyError as e:
+            return {"code": 500, "msg": f"inference error: {e}"}, None
         except Exception as e:
             stack_info = traceback.format_exc()
             logger.error("推理错误 %s, stack:\n%s", e, stack_info)
             return None, f"inference error: {e}"
 
     def transform_call_wrapper(self, src, func, params):
         """
```

## intelliw/core/recorder.py

```diff
@@ -3,15 +3,15 @@
 
 from multiprocessing import Queue as mpQueue
 import json
 import threading
 import traceback
 from intelliw.utils.iuap_request import post
 import intelliw.utils.message as message
-from intelliw.utils.util import get_json_encoder
+from intelliw.utils import get_json_encoder
 from intelliw.utils.logger import _get_framework_logger
 from intelliw.config import config
 from intelliw.utils.global_val import gl
 
 logger = _get_framework_logger()
```

## intelliw/datasets/datasource_large_model.py

```diff
@@ -2,14 +2,15 @@
 Author: liutengx
 Date: 2024-03-05 14:54:05
 LastEditTime: 2024-03-05 14:54:05
 LastEditors: liutengx
 Description: 大模型数据集
 FilePath: /iw-algo-fx/intelliw/datasets/datasource_large_model.py
 """
+import json
 import os
 import shutil
 import time
 from random import Random
 
 from intelliw.config import config
 from intelliw.datasets.datasource_base import AbstractDataSource, DataSourceType, DatasetSelector
@@ -81,30 +82,26 @@
         # 生成数据文件夹
         self._gen_corpora_dir()
 
         start_time = time.time()
         # 切分函数的缓存, 减少切分次数
         spliter_cache = {}
         # io_reader 数据集写入文件io
-        io_reader = []
-        for i in range(DataSourceLMCorpora.dataset_class):
-            file_path = os.path.join(
-                self.dirpath[i], self.file_name[i])
-            io_reader.append(open(file_path, "a", encoding="utf-8"))
+        dataset_list = [[], [], []]
 
         # 进行多文件循环数据集拆分
         for epoch, part in enumerate(self._get_reader()):
             # split_mode 根据拆分模式进行处理
             if split_mode:
                 self.random.shuffle(part)
             part_count = len(part)
 
             # set_data 此part数据集原始数据,切分规则按混合数据集[1,0,0],验证数据集[0,1,0]
             set_data = [[]] * DataSourceLMCorpora.dataset_class
-            nums = [0] * 3
+            nums = [0] * DataSourceLMCorpora.dataset_class
             if self.set_type == FineTuningSerType.mixed:
                 nums = spliter_cache.get(part_count)
                 if nums is None:
                     nums = [part_count, 0, 0] if part_count < 10 else get_set_count(
                         part_count, *self.ratio)
                     spliter_cache[part_count] = nums
             elif self.set_type in [FineTuningSerType.train, FineTuningSerType.general]:
@@ -119,27 +116,26 @@
                 _start += num
             part.clear()
 
             # 更新数据集总数据
             for idx, num in enumerate(nums):
                 DataSourceLMCorpora.counts[idx] += num
 
-            # 将数据写入对应文件
-            [i.writelines(s) for i, s in zip(io_reader, set_data)]
-
-            # 5轮刷新一次缓存区，减少内存压力
-            if epoch and epoch % 5 == 0:
-                [i.flush() for i in io_reader]
+            [i.extend(s) for i, s in zip(dataset_list, set_data)]
 
             logger.info(
                 f"大模型数据文件下载中: train: {DataSourceLMCorpora.counts[0]} 条, validation: {DataSourceLMCorpora.counts[1]} 条, "
                 f"test: {DataSourceLMCorpora.counts[2]} 条")
 
         # 关闭所有句柄
-        [io.close() for io in io_reader]
+        for i in range(DataSourceLMCorpora.dataset_class):
+            file_path = os.path.join(self.dirpath[i], self.file_name[i])
+            with open(file_path, "w", encoding="utf-8") as fp:
+                json.dump(dataset_list[i], fp, ensure_ascii=False)
+
         logger.info(
             f"大模型数据[{self.dataset_no}]下载完成: total: {sum(DataSourceLMCorpora.counts)} 条, "
             f"train: {DataSourceLMCorpora.counts[0]} 条, "
             f"validation: {DataSourceLMCorpora.counts[1]} 条, "
             f"test: {DataSourceLMCorpora.counts[2]} 条, "
             f"time: {time.time() - start_time}")
 
@@ -209,15 +205,15 @@
                 page = self._read_page(self.page_num, self.page_size)
                 assert page is not None, "获取的数据为空"
                 if page['status'] != 1:
                     raise Exception(page['msg'])
                 if page['data']['totalElements'] == 0:
                     raise Exception("大模型 数据获取失败, 无数据")
                 content = page['data']['content']
-                content = [i if i.endswith("\n") else f"{i}\n" for i in content]
+                content = [json.loads(i) for i in content]
             except Exception as e:
                 errmsg = f"大模型 数据获取失败, \nds_id: [{self.ds_id}], \nerror: [{e}], \nresponse: {page}"
                 raise DatasetException(errmsg)
 
             if len(content) == 0:
                 raise StopIteration
             self.page_num += 1
```

## intelliw/datasets/datasource_nlp_corpora.py

```diff
@@ -15,15 +15,15 @@
 from intelliw.datasets.datasource_base import AbstractDataSource, DataSourceType, DatasetSelector
 from intelliw.utils import iuap_request
 from intelliw.utils.logger import _get_framework_logger
 import traceback
 from intelliw.utils.storage_service import StorageService
 from intelliw.config import config
 from intelliw.utils.exception import DatasetException
-from intelliw.utils.util import unzip_file
+from intelliw.utils import unzip_file
 from intelliw.datasets.spliter import get_set_count, check_split_ratio
 
 logger = _get_framework_logger()
 
 
 class CorpusType:
     csv = 'csv'
```

## intelliw/functions/feature_process.py

```diff
@@ -7,15 +7,15 @@
 Description: 按列的特征处理
 FilePath: /iw-algo-fx/intelliw/functions/feature_process.py
 '''
 from copy import deepcopy
 import json
 import random
 from intelliw.utils import message
-from intelliw.utils.util import get_json_encoder
+from intelliw.utils import get_json_encoder
 from collections import Iterable
 from intelliw.config import cfg_parser
 from intelliw.config import config as fw_config
 from intelliw.utils.logger import _get_framework_logger
 from intelliw.utils.global_val import gl
 from intelliw.utils.exception import FeatureProcessException
 from intelliw.utils.exception import DatasetException
```

## intelliw/interface/apihandler.py

```diff
@@ -3,14 +3,15 @@
 Date: 2021-10-25 15:20:34
 LastEditTime: 2023-05-24 15:15:48
 LastEditors: Hexu
 Description: api处理函数
 FilePath: /iw-algo-fx/intelliw/interface/apihandler.py
 '''
 import asyncio
+import queue
 import types
 from concurrent.futures import ThreadPoolExecutor
 
 import starlette.datastructures
 from fastapi import FastAPI, Request as FARequest, Response as FAResponse
 from fastapi.responses import StreamingResponse
 
@@ -19,16 +20,16 @@
 import threading
 
 from intelliw.utils import message, util, aiocache
 from intelliw.utils.aiocache import serializers
 from intelliw.config import config
 from intelliw.core.infer import Infer
 from intelliw.utils.logger import _get_framework_logger
-from intelliw.utils.util import get_json_encoder
-from intelliw.utils.fastapi import request as my_request, gunicorn_server
+from intelliw.utils import get_json_encoder
+from intelliw.utils.intelliwapi import request as my_request, gunicorn_server
 from intelliw.utils import health_check
 
 logger = _get_framework_logger()
 
 
 class _CONTEXT_OBJECT:
     def __init__(self, func, *args):
@@ -193,29 +194,30 @@
 
             initializer = threading_init
             initargs = (
                 self.infer.pipeline.thread_data_pool,
                 self.CONTEXT_OBJECT.func,
                 *self.CONTEXT_OBJECT.args
             )
+
+        self.infer.pipeline.max_task_count = config.INFER_MAX_TASK_RATIO * thread
         self.infer.pipeline.async_executor = ThreadPoolExecutor(
             thread, initializer=initializer, initargs=initargs, thread_name_prefix="IntelliwServerPool")
 
     def _fastapi_server(self):
-        worker, thread = 1, util.number_of_threads(config.CPU_COUNT)
-
-        # 自定义线程数
-        if config.INFER_MULTI_THREAD_COUNT:
-            thread = min(32, max(1, config.INFER_MULTI_THREAD_COUNT))
-
+        worker, thread = util.get_worker_count(
+            config.CPU_COUNT,
+            config.INFER_MULTI_THREAD_COUNT,
+            config.INFER_MULTI_PROCESS
+        )
+        config.INFER_MULTI_PROCESS_COUNT = worker
         self.thread_pool_init(thread)
 
         # 多进程
         if config.INFER_MULTI_PROCESS:
-            worker = util.number_of_workers(config.CPU_COUNT)
             setting = gunicorn_server.default_config(
                 f'0.0.0.0:{self.port}',
                 workers=worker,
             )
             server = gunicorn_server.GunServer(self.app, setting, logger)
         else:
             # 默认模式
@@ -238,15 +240,15 @@
 class BaseHandler:
     """
     BaseHandler
     """
 
     def __init__(self, request: FARequest):
         self.infer_request = my_request.Request()
-        self.fa_request = request
+        self.fa_request = self.infer_request.raw = request
 
     async def request_process(self):
         """
         Process incoming request data.
 
         Returns:
             Tuple[Union[Dict[str, Any], APIResponse], bool]: Parsed request data and success flag.
```

## intelliw/interface/batchjob.py

```diff
@@ -10,15 +10,15 @@
 from intelliw.datasets.datasets import get_dataset, get_datasource_writer, \
     DataSets, MultipleDataSets
 from intelliw.core.recorder import Recorder
 from intelliw.core.infer import Infer
 from intelliw.utils import message
 import uvicorn
 from intelliw.datasets.datasource_base import DataSourceReaderException, DataSourceWriterException
-from intelliw.utils.util import get_json_encoder
+from intelliw.utils import get_json_encoder
 from intelliw.config import config
 from intelliw.utils.logger import _get_framework_logger
 
 logger = _get_framework_logger()
 
 batchjob_infer = "batchjob-infer"
```

## intelliw/utils/__init__.py

```diff
@@ -2,7 +2,8 @@
 Author: hexu
 Date: 2021-10-28 19:45:01
 LastEditTime: 2022-02-14 14:04:35
 LastEditors: your name
 Description: 
 FilePath: /iw-algo-fx/intelliw/utils/__init__.py
 '''
+from intelliw.utils.util import *
```

## intelliw/utils/debug_controller.py

```diff
@@ -74,17 +74,19 @@
 def debug_infer():
     '''(debug_infer时必填)
     设置推理训练数据
     example: INFER_DATA = {"data":[1,2,3]}
     '''
     INFER_DATA = None
     try:
+        import asyncio
         __generate(algorithm_yaml_path, model_yaml_path)
         infer = Infer(PACKAGE_PATH)
-        result = infer.infer(INFER_DATA)
+        loop = asyncio.get_event_loop()
+        result = loop.run_until_complete(infer.infer(INFER_DATA))
         print(result)
     except Exception as e:
         stack_info = traceback.format_exc()
         logger.error(
             "fail to execute pipeline and stack:\n{}".format(str(stack_info)))
 
 
@@ -161,16 +163,16 @@
             "fail to execute pipeline and stack:\n{}".format(str(stack_info)))
 
 
 if __name__ == '__main__':
     if PACKAGE_PATH is None:
         raise FileNotFoundError("请在debug_controller.py中设置PACKAGE_PATH")
     try:
-        debug_train()
-        # debug_infer()
+        # debug_train()
+        debug_infer()
         # debug_router()
         # debug_infer_http_server()
         # debug_server_available()
         # debug_custom
     except (ImportError, TypeError) as e:
         print(
             "\033[1;31;40m如果为debug文件错误， 请通过命令 `intelliw init_debug` 更新debug文件\033[0m")
```

## intelliw/utils/exception.py

```diff
@@ -8,14 +8,18 @@
 '''
 ####### error class #######
 
 
 import os
 
 
+class LimitConcurrencyError(Exception):
+    pass
+
+
 class ExceptionNoStack(Exception):
     def ignore_stack(self):
         return True
 
 
 class PipelineException(Exception):
     pass
```

## intelliw/utils/iuap_request.py

```diff
@@ -8,14 +8,15 @@
 import base64
 import logging
 import requests
 import requests.exceptions
 import requests.packages
 
 from intelliw.config import config
+from intelliw.utils import replace_url
 
 requests.packages.urllib3.disable_warnings()
 logger = logging.getLogger("request")
 logger.setLevel("INFO")
 
 try:
     import jwt
@@ -372,14 +373,16 @@
            'tenantId': config.TENANT_ID,
            'instanceID': config.INSTANCE_ID,
            }
     }
 
     for i in range(1, 5):
         try:
+            if i == 2:
+                url = replace_url(url)
             resp = requests.request(
                 method=method, url=url, params=params, data=data,
                 json=json, headers=headers, verify=False, timeout=timeout
             )
             body = resp.text
             # 验签失败重试
             if "<title>登录</title>" in body:
```

## intelliw/utils/message.py

```diff
@@ -1,12 +1,12 @@
 #!/usr/bin/env python
 # coding: utf-8
 
 import json
-from intelliw.utils.util import get_json_encoder
+from intelliw.utils import get_json_encoder
 from intelliw.config import config
 
 msg_id = 0
 
 
 def get_msg_id():
     global msg_id
```

## intelliw/utils/storage_service.py

```diff
@@ -2,14 +2,15 @@
 Author: hexu
 Date: 2021-11-19 10:29:02
 LastEditTime: 2023-05-23 18:48:50
 LastEditors: Hexu
 Description: 文件存储服务
 FilePath: /iw-algo-fx/intelliw/utils/storage_service.py
 '''
+import json
 import os
 import io
 import mimetypes
 from intelliw.utils import iuap_request
 from intelliw.config import config
 
 
@@ -73,15 +74,16 @@
 
         if isinstance(file, str) and os.path.exists(file) and os.path.isfile(file):
             with open(file, 'rb') as f:
                 _put_file(f)
         elif isinstance(file, (bytes, bytearray, io.BufferedIOBase)):
             _put_file(file)
         else:
-            raise FileNotFoundError('上传的文件文件不存在')
+            file = json.dumps(file, ensure_ascii=False).encode('utf-8')
+            _put_file(file)
 
     def download(self, output_path, stream=False):
         """
         通过操作链接进行下载操作
             Args:
                 output_path ： 下载文件保存路径
         """
@@ -134,15 +136,15 @@
     def __put_file__(self, file, filename) -> None:
         import intelliw.utils.message as message
         from intelliw.utils.global_val import gl
 
         try:
             if config.is_server_mode():
                 # filename
-                if os.path.isfile(file):
+                if isinstance(file, str) and os.path.isfile(file):
                     filename = os.path.basename(file)
 
                 # s3 path
                 self.curkey = os.path.join(config.STORAGE_SERVICE_PATH,
                                            config.SERVICE_ID, filename)
 
                 # file upload
```

## intelliw/utils/util.py

```diff
@@ -6,25 +6,33 @@
 import string
 import types
 import json
 import os
 import zipfile
 from random import Random
 
+from intelliw.config import config
+
 random = Random()
 
 try:
     import numpy as np
 
     np.set_printoptions(threshold=np.inf)
     has_np = True
 except ImportError:
     has_np = False
 
 
+def replace_url(url):
+    internal_aliyun = "intelliw-console.oss-cn-beijing-internal.aliyuncs.com"
+    yy_oss = "intelliw-console.oss-cn-beijing.aliyuncs.com"
+    return url.replace(internal_aliyun, yy_oss)
+
+
 def prepare_algorithm_parameters(alg_ps, value=None):
     value = value if value is not None else {}
     options = {}
     if alg_ps is not None:
         for k, v in enumerate(alg_ps):
             key = v['key'] if 'key' in v else None
             option = v['option'] if 'option' in v else None
@@ -173,14 +181,29 @@
         for file in fz.namelist():
             fz.extract(file, unziptodir)
     else:
         raise FileExistsError('This is not zip')
     return unziptodir
 
 
+def get_worker_count(cpus, threads, is_multi_precess):
+    worker, thread = 1, number_of_threads(cpus)
+    if is_multi_precess:
+        worker = number_of_workers(config.CPU_COUNT)
+
+    # 自定义线程数
+    if threads:
+        thread = threads
+        if worker > 1:
+            thread = math.floor(thread / worker)
+        thread = min(64, max(1, thread))
+
+    return worker, thread
+
+
 def number_of_workers(core: str = ''):
     core = str(core).lower()
     num_core = 1
     try:
         if core:
             if 'm' in core:
                 num_core = 1
@@ -207,15 +230,15 @@
                 num_core = 1
             elif core.isdigit():
                 num_core = int(core)
             else:
                 num_core = math.ceil(float(core))
     except:
         pass
-    return min(32, 2 * num_core + 1)
+    return min(64, 2 * num_core + 1)
 
 
 DB_NUM_TYPE = [
     "TINYINT",
     "SMALLINT",
     "MEDIUMIN",
     "INT",
```

## intelliw/utils/yaml_downloader.py

```diff
@@ -1,31 +1,16 @@
 import sys
-import time
-import requests
-
-requests.packages.urllib3.disable_warnings()
-
-internal_aliyun = "intelliw-console.oss-cn-beijing-internal.aliyuncs.com"
-yy_oss = "intelliw-console.diwork.com"
+from intelliw.utils import iuap_request
 
 
 def download(url, path):
-    for i in range(1, 5):
-        try:
-            if i == 2 and internal_aliyun in url:
-                url = url.replace(internal_aliyun, yy_oss)
-            resp = requests.get(url, verify=False, timeout=10.0)
-            resp.raise_for_status()
-            with open(path, "wb") as fp:
-                fp.write(resp.content)
-            return
-        except requests.exceptions.RequestException as e:
-            if i == 4:
-                raise e
-            time.sleep(i * 2)
-            print(f"request retry time: {i}, url: {url}, error: {e}", flush=True)
+    resp = iuap_request.get(url, timeout=10.0)
+    resp.raise_for_status()
+    with open(path, "wb") as fp:
+        fp.write(resp.content)
+    return
 
 
 if __name__ == '__main__':
     file_url = sys.argv[1]
     save_path = sys.argv[2]
     download(file_url, save_path)
```

## Comparing `intelliw/utils/fastapi/context.py` & `intelliw/utils/intelliwapi/context.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 from copy import deepcopy
 
-from intelliw.utils.fastapi import _request_scope_context_storage
+from intelliw.utils.intelliwapi import _request_scope_context_storage
 from contextvars import copy_context
 
 
 class _Context:
 
     @staticmethod
     def get():
```

## Comparing `intelliw/utils/fastapi/gunicorn_server.py` & `intelliw/utils/intelliwapi/gunicorn_server.py`

 * *Files 20% similar despite different names*

```diff
@@ -8,15 +8,15 @@
 def default_config(bind, workers=None):
     config = {
         'bind': bind,
         'accesslog': '-', 'errorlog': '-',
         'loglevel': os.environ.get("intelliw.logger.level", 'INFO'),
         'timeout': 6000,
         'workers': workers or 1,
-        'worker_class': 'uvicorn.workers.UvicornWorker',
+        'worker_class': 'intelliw.feature.IntelliwWorker',
         'logger_class': CustomLogger
     }
     return config
 
 
 try:
     import gunicorn.app.base
@@ -50,19 +50,21 @@
             # Override Gunicorn's `error_log` configuration.
             self.__set_handler(self.error_log, formatter, framework_handler)
             self.__set_handler(self.access_log, formatter, framework_handler)
 
 
     class GunServer(gunicorn.app.base.BaseApplication):
 
-        def __init__(self, app, options=None, logger=None):
+        def __init__(self, app, options=None, logger=None, limit_concurrency=100):
             self.options = options or {}
             self.application = app
             self.logger = logger
+
             super().__init__()
+            # self.cfg.set('max_requests', limit_concurrency)
 
         def load_config(self):
             config = {key: value for key, value in self.options.items()
                       if key in self.cfg.settings and value is not None}
             for key, value in config.items():
                 self.cfg.set(key.lower(), value)
 
@@ -73,33 +75,23 @@
             super().run()
 except Exception as e:
     _get_framework_logger().warning('Windows can not use Gunicorn, Uvicorn service import')
 
 
 class UvicornServer:
 
-    def __init__(self, app, host='0.0.0.0', port=8888, workers=None):
+    def __init__(self, app, host='0.0.0.0', port=8888, workers=None, limit_concurrency=9999):
         config = uvicorn.Config(
             app,
             host=host,
             port=int(port),
-            workers=workers
+            workers=workers,
+            limit_concurrency=limit_concurrency
         )
         self.server = uvicorn.Server(config)
-        self.init_logger()
-
-    @staticmethod
-    def init_logger():
-        LOGGER_NAMES = ("uvicorn", "uvicorn.access",)
-        for logger_name in LOGGER_NAMES:
-            logging_logger = logging.getLogger(logger_name)
-            logging_logger.handlers = logging.getLogger().handlers
-            logging_logger.setLevel(
-                os.environ.get("intelliw.logger.level", logging.INFO)
-            )
 
     def run(self):
         self.server.run()
 
 
 if __name__ == '__main__':
     # options = {
```

## Comparing `intelliw/utils/fastapi/response.py` & `intelliw/utils/intelliwapi/response.py`

 * *Files identical despite different names*

## Comparing `intelliw-2.0.2rc2.dist-info/LICENCE` & `intelliw-2.1.0.dist-info/LICENCE`

 * *Files identical despite different names*

## Comparing `intelliw-2.0.2rc2.dist-info/METADATA` & `intelliw-2.1.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: intelliw
-Version: 2.0.2rc2
+Version: 2.1.0
 Summary: An easy to start Intelligent Workshop Algorithm Framework
 Home-page: http://git.yonyou.com/iuapaipaas/iw-algo-fx
 Author: yonyou
 Author-email: yonyou@yonyou.com
 Classifier: Development Status :: 3 - Alpha
 Classifier: Programming Language :: Python :: 3.6
 Classifier: Programming Language :: Python :: 3.7
```

## Comparing `intelliw-2.0.2rc2.dist-info/RECORD` & `intelliw-2.1.0.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,78 +1,78 @@
 intelliw/.DS_Store,sha256=FWsT2V9Tu_FKYUhERgofxps-qfyeasfyNI539Pv9Cw8,10244
-intelliw/__init__.py,sha256=TyZsPUe2dV_zTjBLLUOE5Sm4Fm8YH_Lic-zNchcW99w,733
-intelliw/feature.py,sha256=_vBEBeHG1ctv-TZtapawyxtKs5ihRq-jMCScceqlxyU,825
-intelliw/prepare_env.sh,sha256=TaTC7P_NMnDxFsu81SD0ohuljbgbcLhm3TJROwGgLDs,9696
+intelliw/__init__.py,sha256=swUxH6knPJe_kRs7r1fYsgcl8D2HwGg-DUBx3gJrM-Y,730
+intelliw/feature.py,sha256=wZpvnhlxzK2AAdYjEznjKuqD7Ud51d3OhWJHHbJQogg,887
+intelliw/prepare_env.sh,sha256=Fhtfhr7RoQIRZyZTwG-uHoJ7LWKLeJn4NC8Y10a-pV4,10062
 intelliw/algorithms_demo/README.md,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 intelliw/algorithms_demo/algorithm.py,sha256=El8hJacV1H1ea2a7gvroTpcHuqIareQn_Vzb4bBzp-0,5519
 intelliw/algorithms_demo/algorithm.yaml,sha256=tZXyYV-oOGWTZ2yTIrpucnZEFCLOryOFftQmpbzRo64,270
 intelliw/algorithms_demo/requirements.txt,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 intelliw/config/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-intelliw/config/cfg_parser.py,sha256=aUV3a63Llm2Z3D0cpY9a-_IJBdpMDXiAOtM_rlNmsLI,4446
-intelliw/config/config.py,sha256=7DdGzQV-kil_FknSqOol8FWT-SfkMD2pANhj89BJPTE,5390
+intelliw/config/cfg_parser.py,sha256=fFLRVELsZs_RVSM0Y97EWqGwWTV0kn91janqCp5WFhM,4446
+intelliw/config/config.py,sha256=CvpPJ74XdgJK-Y42kswnEUuYz1OKVYehun-pWxF2WwE,5506
 intelliw/config/dataset_config.py,sha256=3JNAZMR78NMe6NS1NBUOiQ13cXqSs-5XcG0FByMsVDk,5460
 intelliw/core/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-intelliw/core/al_decorator.py,sha256=98l60ultYNdPbo8HL4GcA61-GmyoPk4N62yGT6DAT2M,9522
+intelliw/core/al_decorator.py,sha256=WQbwcxRIEIfgBNrOHD4W50lD2OUA9pcdS9MofKn3cTA,9507
 intelliw/core/custom.py,sha256=tSgtC23k5N2PAch3g5K90hObkxFxZZO3THTwZ7cLPVA,5891
-intelliw/core/infer.py,sha256=txL3nGxEI5yvpYkYFyQC3uw8VVuLxSTwnwejfJYnWf8,740
+intelliw/core/infer.py,sha256=SpN50AI5qQ1a7ou7arY0tXSmtuYyeqqFLVXl8tNsZcw,744
 intelliw/core/linkserver.py,sha256=UgqJhbDV2yxs8XRYJ_jrK9XoP_zc-CIcsCxcA329FLk,9617
-intelliw/core/pipeline.py,sha256=7A6L8IgaRNcOlX5LeSV5svWe9HZ9iTnjFeSTesK-9H8,29057
-intelliw/core/recorder.py,sha256=TzlnqKIlrVMPyhWl7iMz1C7ZymgXPKGLlG4buQV1Oqw,2362
+intelliw/core/pipeline.py,sha256=8qow5BaoajdbmwjzMIY9dbE1ydCPOW6PGPhji1_UEac,29548
+intelliw/core/recorder.py,sha256=12g14UNnypwJJeaVaTqY2Nv4p7FHjrVoqyxXK7ccUko,2357
 intelliw/core/trainer.py,sha256=sBxzTxLcJuzfX2KI98y80eSiwqZBKkclKV_EmzuSwbY,903
 intelliw/datasets/__init__.py,sha256=PRq4976rCVMRI5SpeZpC9hJFxyej1P6dgw0cTE4OQEk,675
 intelliw/datasets/dataset_writer.py,sha256=9ib5qV9e5KAK3K6T0alnqgv_MB0uE-UCIJ5qMa8LzJw,9230
 intelliw/datasets/datasets.py,sha256=5Qry2WrGy8ccGRRJavwrkvw1MweppY81G9hxYZPLFPs,8669
 intelliw/datasets/datasource_base.py,sha256=nCzbHKMVzUZS99wQJ5D3YN2NAgZit3mQv9xaXlYE33k,3691
 intelliw/datasets/datasource_empty.py,sha256=CrXJP3VHT-f6BrbJppwBseuxVrdqWsMd7tETS3n9FKM,1006
 intelliw/datasets/datasource_intelliv.py,sha256=2KLuy2VJq4qev5aZR6V4PA_MgZ6Ap9Mm-sD7DDr2TnE,6847
 intelliw/datasets/datasource_iwfactorydata.py,sha256=GiWaaWslsYXsqwWX_0v04pf1e8excB6cUvzYvfhU6fw,8850
 intelliw/datasets/datasource_iwimgdata.py,sha256=rt7DelZYdf97pXq4Iz--rZgNoiEayhxHy0zWae4-x2A,15959
-intelliw/datasets/datasource_large_model.py,sha256=3JCUD-QBDOfx-w4jniHkoSl3NUEtYV3TQZfpPgrw--E,9250
+intelliw/datasets/datasource_large_model.py,sha256=En5Avo5Ud5k59d_glpFLeOonb31TBqUSHjuoMepZ-3A,9096
 intelliw/datasets/datasource_local_csv.py,sha256=FsWg5DS6cn8y_eAWmg1-UZWo7pA-XeTheMbC5EpnWYU,5248
-intelliw/datasets/datasource_nlp_corpora.py,sha256=SDPDvlek1wrbReyIPZPA2a53MiX9RvLdd8hJL1LIN7o,14858
+intelliw/datasets/datasource_nlp_corpora.py,sha256=GIxpBrEdXRvnV27uXabjU6SUfLLq8YMYjxODFxPanyQ,14853
 intelliw/datasets/datasource_remote_csv.py,sha256=QB8-zZ-tJa1IGcO7v4plxph6n7K3X3IYN6vGq-HRkwg,2102
 intelliw/datasets/datasource_semantic.py,sha256=nnFp25WtQPOdM1nIk_6AR4Hx-PN5tqVcaDwADLnSSHc,7424
 intelliw/datasets/spliter.py,sha256=U3ypm7zKfFuSBFl_2UexT0MWl6vPIcTYOs-vkCxtLwM,13871
 intelliw/docs/Q&A.md,sha256=gA4zWPr0ZRDbFGKRgKc_bYAK0XvYw8y4XjFoSnMJmgs,12226
 intelliw/docs/README.md,sha256=2EG59-UPn-TIYHBVvFeIRZPBcuGlGzTVB7xbbMMwy7I,3144
 intelliw/docs/instructions.md,sha256=GpwwjYyTvtW5bB5iI-YflKHpGuhBpNUSg1-lJwhS5ms,50500
 intelliw/functions/__init__.py,sha256=HgRYG-ApO4hXiHu8mcNP-8IZLSImSGbwSAfQMJ1xMm4,699
 intelliw/functions/data_filtering.py,sha256=qLmf2JyVgipn4jXO3wJNVYpHMkdWv1V3towbgQ4_hzI,5512
-intelliw/functions/feature_process.py,sha256=3xmaOr3aqdtBO8j_EDyyy1a5E0EMPPww7JRlJu4Emzk,37589
+intelliw/functions/feature_process.py,sha256=4xhv3NZMPgu_8GxaEWDtehr0CaDPTaRXf71UmeW2xjE,37584
 intelliw/functions/general.py,sha256=LlqalXzNAYbSl224fhKTo5RH3kdE_T0Ek88Yktj52kQ,619
 intelliw/functions/matrix.py,sha256=8lNKGWC6KaHtw9SvhtF90ptuonjq-EMWWn6PyNv3v6o,1486
 intelliw/functions/opencv.py,sha256=kXruqVOB11DTRdQIB0zZEJi5tx8aubrXrxTaW0Xa_-0,1711
 intelliw/functions/post.py,sha256=cf1c-TJ4bwNwXldAhdr9zOBLBkOT3M4-fMmJQwwbUfM,650
 intelliw/functions/select_columns.py,sha256=U4DNOnCJ3mTOudQx_1TNt2vciPu04zpN7P0RXNGJvk4,779
 intelliw/interface/__init__.py,sha256=Kp7gnULYZPdO7EReW-0DKWdyV7PI-AB9QAB9B8l6Lx8,171
-intelliw/interface/apihandler.py,sha256=n7TkzzzYpy4PibeW4JCpoUx3IJUlNd_-mziSuySXIUY,12826
+intelliw/interface/apihandler.py,sha256=OSIodOMsIcoRKIh8P0hR1lByMVU5NdB0gNrSP5iGrsE,12892
 intelliw/interface/apijob.py,sha256=SegGN-VANHeu3RMG9IiucaM37L2mElOibePf7d2D6Ls,533
-intelliw/interface/batchjob.py,sha256=lRs1A_Kbja8f3aJXITmf5k0nB-vmETCyHs03jzt7ON4,8019
+intelliw/interface/batchjob.py,sha256=a0dlAxnRisCU_H2SQs1SXBznglbPDsEj6jMRkbZLRic,8014
 intelliw/interface/controller.py,sha256=-yIydNuvOe5NpCLRC8Chf7G_usRCDiwUYqzp0kNob0Q,4240
 intelliw/interface/customjob.py,sha256=VdLfeO5K6KldCvLwzfcoOfoWXSKBlGMCThhwKyLZXFM,1255
 intelliw/interface/entrypoint.py,sha256=ZU6g3IiJrvQmOxKg2LydjS6N7qDaXxfVSrmTt6ImRlg,8504
 intelliw/interface/trainjob.py,sha256=rF0f2QxwFmysiz_nOXVTeLG7cQNqbJjFqqYX-wik_fk,1300
 intelliw/utils/.DS_Store,sha256=1lFlJ5EFymdzGAUAaI30vcaaLHt3F1LwpG7xILf9jsM,6148
-intelliw/utils/__init__.py,sha256=GSxKDj3SJV5XVFtCgACfiPZmxO1ooV8XgMCpyu-1zgE,167
+intelliw/utils/__init__.py,sha256=aDKkDfNtCrJGzGwd5wvAJfL6u64h9cXe2VmxNYGVsdY,201
 intelliw/utils/cGroup.py,sha256=rdXLH1EIQLs7_v-apxivGoZm6s1bujWadPCjgoUuvb4,4824
 intelliw/utils/check_algorithm_py.py,sha256=eYbwT0VFsbStIJ1HATfOMP6SevaB22pPTaksRkVHw9c,2048
 intelliw/utils/crontab.py,sha256=4Z-M45gFvIea_RoL06MewCPuGRTM17jgR4fu8RD3Vh8,4103
-intelliw/utils/debug_controller.py,sha256=mg-NXCgWmWjiHQpbEe4Z7PT7ltagnHmsIImkpf3Yi8U,5987
-intelliw/utils/exception.py,sha256=9U0e98BSOWUP76OvGu4F3Y-5acwHxt91bkMwmsS0QIY,1932
+intelliw/utils/debug_controller.py,sha256=F4S3oY19ZnRoNz_kVhqY1foz3m0R5wa2s2aYKE_566Y,6075
+intelliw/utils/exception.py,sha256=UazMobWm4nS2uXJMoHiG6Kc_oj1mu2yOEVXqv0ihZqo,1983
 intelliw/utils/gen_model_cfg.py,sha256=993YAroB9_Po3kuXpKXdrXwsUY_SsMdnisbWOIhxhVI,2748
 intelliw/utils/global_val.py,sha256=TVjQxrSmZvUPFpKPhl-bCGSm3kT09DLEaw-j6eK-Wko,2126
 intelliw/utils/health_check.py,sha256=rM8nSFlfujqO9m8lbbRpzapL-EoRI9qMVgPdnHxbECQ,44
 intelliw/utils/hijack_function.py,sha256=9af7XrfQM_JwgTCDCZ6BmK_PiC72nzrBlxqaSlQuk5o,2916
 intelliw/utils/iprofile.py,sha256=Cyp5RK2Fg3J-A2hUmNHyxbDUyYKpYLj0mWhT1aF4Zls,1049
-intelliw/utils/iuap_request.py,sha256=2VCkHirQzzRVcwdG7sTZcAyIjBdH2qtSkR3tSHDQywg,13531
+intelliw/utils/iuap_request.py,sha256=j6hfhdkxdLUDyPYNvEiDtwFTYEICSiS9Gq_l4_u-VCk,13632
 intelliw/utils/logger.py,sha256=D2j281KoV5qzcc5nv6WP9cdtdnu1nRMnJIrfSSBJQ0w,4433
-intelliw/utils/message.py,sha256=nqMa75SbVHnxnsDhZwbg4KcY8-06amJjllD8pUpsJO0,6745
-intelliw/utils/storage_service.py,sha256=t7Tu-JvogETZckiH44vDIlz7rPiXrKSZxX01o7rBBcA,6172
-intelliw/utils/util.py,sha256=_lhJgJB0lsp6Xdu2H_UMVbh7NEZs6HjYyfKq_zWhsbw,6695
-intelliw/utils/yaml_downloader.py,sha256=eFSuilJ8AS82sVDDpzTwqF8pVG7cy9uREfHnsxi-nmo,909
+intelliw/utils/message.py,sha256=36Dw3CghaW9DtadHpMc7NHkuGMHecBDvgR5p1oEcbPU,6740
+intelliw/utils/storage_service.py,sha256=4HXOH3OhMDQsUjzf5RCDgMRWFZN0ScoresmA6T9GEbA,6240
+intelliw/utils/util.py,sha256=4E2DqEafmalP6t8a32SHdjQX_sXRr-UGUW0oW8oiDzQ,7354
+intelliw/utils/yaml_downloader.py,sha256=8DrvTNoa77ch7P8MhgV7cebv-XV1O2Q2s6yLyi1CY9s,346
 intelliw/utils/yms_downloader.py,sha256=w0piHHtpaS5KtykESfNWwqf490p8-JviAw8jmG4c6RA,9180
 intelliw/utils/aiocache/__init__.py,sha256=QwZy6d8Ruy69D3CHXoJjpSw0sUr31xcnSVuwPl8h3lk,1163
 intelliw/utils/aiocache/base.py,sha256=kcPMHMCZjNud6Qhne-8IYUIf_6LjwpYKgimhpk8VINI,20436
 intelliw/utils/aiocache/common.py,sha256=n3wQNJoCCScfyP0Ej7Mi1xNd9Q7g7kXIeafXYQhJYqs,829
 intelliw/utils/aiocache/decorators.py,sha256=TY6yyHuVCYTZDl4WXxwwJuU3RKoNmgXZqcuByvFPAUM,19811
 intelliw/utils/aiocache/exceptions.py,sha256=maPdFVMOWUcMoaSZhe_Boxs41b230e9Ak7YXTvkedac,44
 intelliw/utils/aiocache/factory.py,sha256=zgJs6AhedRk1rgIe_wACd74UagmT9Pk98BIv0jVc0_Q,9070
@@ -88,29 +88,33 @@
 intelliw/utils/colorlog/escape_codes.py,sha256=Z9fr6RZL6PDHiqhRMhb9lXclz0Myr3Y89EAa_2jFGjE,2268
 intelliw/utils/colorlog/formatter.py,sha256=zrMtCNw5HEJkiXB0fpBDzDSr6O_hxj3dXmMyZzPzHUE,7791
 intelliw/utils/colorlog/wrappers.py,sha256=9ZTxyYfAfk13-OD1NsaD7i_sLrn7EvooaXp2oZcJ4tc,2212
 intelliw/utils/database/__init__.py,sha256=O1O1dlwx3aI41RN_3R6rhp0-zwHMmsRdf-Fb0N-5_cg,466
 intelliw/utils/database/connection.py,sha256=0_-TatMn_aU8m4O2BScdODH0eymgFpyRgxCHfV6idDk,3253
 intelliw/utils/database/proxy.py,sha256=P5WOq4bwsTUDloOQss901Dij70BbduIQuM-AEeaZNN4,2023
 intelliw/utils/database/schema.py,sha256=a19X5qr3woPC_BQy-HMObgie754xQaDO8UsvTaTd2G0,2605
-intelliw/utils/fastapi/__init__.py,sha256=Z2HB3tC07LF9ifmvLKr4O99_fTR7q0q7WI8EBvxYsZw,124
-intelliw/utils/fastapi/context.py,sha256=cWJ_eu_dbO4edVEAfRV1eCwgahZCU4Ig3pqJI588fko,888
-intelliw/utils/fastapi/gunicorn_server.py,sha256=vS4rjp7D_Pdny1pM9_RXfQEC-c0Oi83l5GyDS6BB4z0,3409
-intelliw/utils/fastapi/request.py,sha256=yhOccU121prtkvjyok43Ut3BDPtVAVv6SnTmZWFKuw0,447
-intelliw/utils/fastapi/response.py,sha256=Zu7mne6rJ7oNKGxZGWz4MWkSiSLGyjbEP79nybs9RPA,547
+intelliw/utils/intelliwapi/__init__.py,sha256=Z2HB3tC07LF9ifmvLKr4O99_fTR7q0q7WI8EBvxYsZw,124
+intelliw/utils/intelliwapi/context.py,sha256=R6zc4Lpg5zd4-5-CAyYpHAnoQnEXyFxW3xX9hW48vG8,892
+intelliw/utils/intelliwapi/gunicorn_server.py,sha256=5LFSLr2aQ8FH9-dt9wnMmTbhsxuGWBztFM14EjXPM1Y,3158
+intelliw/utils/intelliwapi/request.py,sha256=5sPF9pJIkykj4EFgHULyt1qY05f0Jy_0tmcPpKH1Glw,471
+intelliw/utils/intelliwapi/response.py,sha256=Zu7mne6rJ7oNKGxZGWz4MWkSiSLGyjbEP79nybs9RPA,547
+intelliw/utils/intelliwapi/workers.py,sha256=GV2ULRp88fPTBNFP42YSLc3MeNPfpiOFr_3OLsBxUF4,3883
+intelliw/utils/logs/iw-algo-fx-framework.log,sha256=eoZeaER2SmRqrYkaRt8x1vL61_hJah_YuQBXyDR_16s,104
+intelliw/utils/logs/iw-algo-fx-user.log,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
+intelliw/utils/logs/iw-algo-fx.log,sha256=qaZvL6bL1Q1Kzi30rwVM3pgSsaGSfOYSQOv3fOv-F1U,108
 intelliw/utils/redis/__init__.py,sha256=GohpGBdgt-eXNu4NYa8aAMzMOp-VwzTkSVw_3sO4GWU,2513
 intelliw/utils/redis/common.py,sha256=PGVQqdCWF75gM4MpnPjgcGOlBzi7n-iJcybzvUHPKLE,245
 intelliw/utils/redis/connect.py,sha256=T0RIWnbWckz8WMIzke96LSd07UTuVNRjVRiDQQl6i3Y,2450
 intelliw/utils/redis/connect_async.py,sha256=lcRu-WsFEVKIQ5kD0vLmGKD1hJghzn63Ux6zg5iXe94,2601
 intelliw/utils/redis/test.py,sha256=8J5VBKgsHVHdJrcCg5uv0Hu2dStcKZN9-QsJiEs4Z_s,1315
 intelliw/utils/redis/logs/iw-algo-fx-framework.log,sha256=LgIokudCp1huOYd3qTSAYGqUbzX_PsfqlK49tf8pBHg,636
 intelliw/utils/redis/logs/iw-algo-fx-user.log,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 intelliw/utils/redis/logs/iw-algo-fx.log,sha256=cbzUwThdK08CCf0OT4Kkp3unypnzdX4a4VU_W89WBxg,1724
 intelliw/utils/spark_process/__init__.py,sha256=VJ7OMg8K06lStMmcAyZf-BP0MiRnIVPXBhytMYEZDac,200
 intelliw/utils/spark_process/engine.py,sha256=LNdnAxWpNrdfYOL4cqX0MLuyy9lmzJQflTwDH4MappY,26154
 intelliw/utils/spark_process/spark.py,sha256=C9hz566trwIS8iMbsnkVkDMyKwRZzHblBojOSIuoIXY,4420
-intelliw-2.0.2rc2.dist-info/LICENCE,sha256=jOtLnuWt7d5Hsx6XXB2QxzrSe2sWWh3NgMfFRetluQM,35147
-intelliw-2.0.2rc2.dist-info/METADATA,sha256=kH8xr3k4zvEcHSa4Js7ESW3GRGgGOqp8J2Nm6ZDF-a0,4943
-intelliw-2.0.2rc2.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
-intelliw-2.0.2rc2.dist-info/entry_points.txt,sha256=8Day1wo02R4zN-l1PSIwMp6_qyYRD7eWEUFeQZhMuL4,63
-intelliw-2.0.2rc2.dist-info/top_level.txt,sha256=dmGM8TdTr29-SSGGklu4UuJvUesyssGJcegjlhTaYLE,9
-intelliw-2.0.2rc2.dist-info/RECORD,,
+intelliw-2.1.0.dist-info/LICENCE,sha256=jOtLnuWt7d5Hsx6XXB2QxzrSe2sWWh3NgMfFRetluQM,35147
+intelliw-2.1.0.dist-info/METADATA,sha256=EzrKT9uwRB5qO-k3wtYLjWERh3QtDXVHuh8njBVkDjA,4940
+intelliw-2.1.0.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+intelliw-2.1.0.dist-info/entry_points.txt,sha256=8Day1wo02R4zN-l1PSIwMp6_qyYRD7eWEUFeQZhMuL4,63
+intelliw-2.1.0.dist-info/top_level.txt,sha256=dmGM8TdTr29-SSGGklu4UuJvUesyssGJcegjlhTaYLE,9
+intelliw-2.1.0.dist-info/RECORD,,
```

